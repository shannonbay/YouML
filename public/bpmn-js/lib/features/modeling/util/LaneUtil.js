import{is}from"../../../util/ModelUtil";import{getParent}from"./ModelingUtil";import{isHorizontal}from"../../../util/DiUtil";import{asTRBL}from"diagram-js/lib/layout/LayoutUtil";import{substractTRBL,resizeTRBL}from"diagram-js/lib/features/resize/ResizeUtil";var abs=Math.abs;function getTRBLResize(t,o){return substractTRBL(asTRBL(o),asTRBL(t))}var LANE_PARENTS=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"];export var LANE_INDENTATION=30;export function collectLanes(t,o){return o=o||[],t.children.filter((function(t){is(t,"bpmn:Lane")&&(collectLanes(t,o),o.push(t))})),o}export function getChildLanes(t){return t.children.filter((function(t){return is(t,"bpmn:Lane")}))}export function getLanesRoot(t){return getParent(t,LANE_PARENTS)||t}export function computeLanesResize(t,o){var e=getLanesRoot(t),r=collectLanes(e,is(e,"bpmn:Process")?[]:[e]),i=asTRBL(t),s=asTRBL(o),a=getTRBLResize(t,o),n=[],l=isHorizontal(t);return r.forEach((function(o){if(o!==t){var e=l?0:a.top,r=l?a.right:0,b=l?0:a.bottom,p=l?a.left:0,m=asTRBL(o);a.top&&(abs(m.bottom-i.top)<10&&(b=s.top-m.bottom),abs(m.top-i.top)<5&&(e=s.top-m.top)),a.left&&(abs(m.right-i.left)<10&&(r=s.left-m.right),abs(m.left-i.left)<5&&(p=s.left-m.left)),a.bottom&&(abs(m.top-i.bottom)<10&&(e=s.bottom-m.top),abs(m.bottom-i.bottom)<5&&(b=s.bottom-m.bottom)),a.right&&(abs(m.left-i.right)<10&&(p=s.right-m.left),abs(m.right-i.right)<5&&(r=s.right-m.right)),(e||r||b||p)&&n.push({shape:o,newBounds:resizeTRBL(o,{top:e,right:r,bottom:b,left:p})})}})),n}