import inherits from"inherits-browser";import CommandInterceptor from"diagram-js/lib/command/CommandInterceptor";import{forEach}from"min-dash";import{getMid}from"diagram-js/lib/layout/LayoutUtil";import{selfAndAllChildren}from"diagram-js/lib/util/Elements";import{isExpanded}from"../../../util/DiUtil";export default function ToggleCollapseConnectionBehaviour(o,e){CommandInterceptor.call(this,o),this.postExecuted("shape.toggleCollapse",1500,(function(o){var i=o.shape;if(!isExpanded(i)){var n=selfAndAllChildren(i);n.forEach((function(o){var e=o.incoming.slice(),i=o.outgoing.slice();forEach(e,(function(o){t(o,!0)})),forEach(i,(function(o){t(o,!1)}))}))}function t(o,t){-1!==n.indexOf(o.source)&&-1!==n.indexOf(o.target)||(t?e.reconnectEnd(o,i,getMid(i)):e.reconnectStart(o,i,getMid(i)))}}),!0)}inherits(ToggleCollapseConnectionBehaviour,CommandInterceptor),ToggleCollapseConnectionBehaviour.$inject=["eventBus","modeling"];