import inherits from"inherits-browser";import CommandInterceptor from"diagram-js/lib/command/CommandInterceptor";import{getBusinessObject,is}from"../../../util/ModelUtil";import{isLabel}from"../../../util/LabelUtil";var LOW_PRIORITY=500;export default function DetachEventBehavior(e,t){t.invoke(CommandInterceptor,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",LOW_PRIORITY,(function(e){var t=e.elements;t.filter((function(e){return shouldReplace(e,e.host)})).map((function(e){return t.indexOf(e)})).forEach((function(i){e.elements[i]=n._replaceShape(t[i])}))}),!0),this.preExecute("elements.move",LOW_PRIORITY,(function(e){var t=e.shapes,i=e.newHost;t.forEach((function(e,r){var o=e.host;shouldReplace(e,includes(t,o)?o:i)&&(t[r]=n._replaceShape(e))}))}),!0)}function getEventDefinition(e){var t=getBusinessObject(e).eventDefinitions;return t&&t[0]}function shouldReplace(e,t){return!isLabel(e)&&is(e,"bpmn:BoundaryEvent")&&!t}function includes(e,t){return-1!==e.indexOf(t)}DetachEventBehavior.$inject=["bpmnReplace","injector"],inherits(DetachEventBehavior,CommandInterceptor),DetachEventBehavior.prototype._replaceShape=function(e){var t,n=getEventDefinition(e);return t=n?{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:n.$type}:{type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,t,{layoutConnection:!1})};