import{assign}from"min-dash";import{is}from"./ModelUtil";import{isLabel}from"diagram-js/lib/util/ModelUtil";export{isLabel}from"diagram-js/lib/util/ModelUtil";export var DEFAULT_LABEL_SIZE={width:90,height:20};export var FLOW_LABEL_INDENT=15;export function isLabelExternal(t){return is(t,"bpmn:Event")||is(t,"bpmn:Gateway")||is(t,"bpmn:DataStoreReference")||is(t,"bpmn:DataObjectReference")||is(t,"bpmn:DataInput")||is(t,"bpmn:DataOutput")||is(t,"bpmn:SequenceFlow")||is(t,"bpmn:MessageFlow")||is(t,"bpmn:Group")}export function hasExternalLabel(t){return isLabel(t.label)}export function getFlowLabelPosition(t){var e=t.length/2-1,a=t[Math.floor(e)],i=t[Math.ceil(e+.01)],n=getWaypointsMid(t),r=Math.atan((i.y-a.y)/(i.x-a.x)),o=n.x,l=n.y;return Math.abs(r)<Math.PI/2?l-=FLOW_LABEL_INDENT:o+=FLOW_LABEL_INDENT,{x:o,y:l}}export function getWaypointsMid(t){var e=t.length/2-1,a=t[Math.floor(e)],i=t[Math.ceil(e+.01)];return{x:a.x+(i.x-a.x)/2,y:a.y+(i.y-a.y)/2}}export function getExternalLabelMid(t){return t.waypoints?getFlowLabelPosition(t.waypoints):is(t,"bpmn:Group")?{x:t.x+t.width/2,y:t.y+DEFAULT_LABEL_SIZE.height/2}:{x:t.x+t.width/2,y:t.y+t.height+DEFAULT_LABEL_SIZE.height/2}}export function getExternalLabelBounds(t,e){var a,i,n,r=t.label;return r&&r.bounds?(n=r.bounds,i={width:Math.max(DEFAULT_LABEL_SIZE.width,n.width),height:n.height},a={x:n.x+n.width/2,y:n.y+n.height/2}):(a=getExternalLabelMid(e),i=DEFAULT_LABEL_SIZE),assign({x:a.x-i.width/2,y:a.y-i.height/2},i)}function getLabelAttr(t){return is(t,"bpmn:FlowElement")||is(t,"bpmn:Participant")||is(t,"bpmn:Lane")||is(t,"bpmn:SequenceFlow")||is(t,"bpmn:MessageFlow")||is(t,"bpmn:DataInput")||is(t,"bpmn:DataOutput")?"name":is(t,"bpmn:TextAnnotation")?"text":is(t,"bpmn:Group")?"categoryValueRef":void 0}function getCategoryValue(t){var e=t.categoryValueRef;return e&&e.value||""}export function getLabel(t){var e=t.businessObject,a=getLabelAttr(e);if(a)return"categoryValueRef"===a?getCategoryValue(e):e[a]||""}export function setLabel(t,e){var a=t.businessObject,i=getLabelAttr(a);return i&&("categoryValueRef"===i?a.categoryValueRef.value=e:a[i]=e),t}